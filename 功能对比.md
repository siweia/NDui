# Pig 关键词提取功能 vs NDui 实现对比

## 1. 按钮功能
### Pig:
- 左键：打开设置界面
- 右键：启用/关闭提取
- Shift+右键：启用/关闭过滤
- 按钮有 X 标记显示关闭状态

### NDui (当前):
- ✅ 左键：打开设置界面
- ✅ 右键：启用/关闭提取
- ⚠️ Shift+右键：只提示使用 NDui 过滤（未实现）
- ✅ 按钮颜色：红色=关闭，绿色=开启

**差异**: Pig 有独立的过滤功能，NDui 简化了

---

## 2. 关键词设置
### Pig:
- 支持 `,` 分隔多个关键词
- 支持 `AA` - 包含AA
- 支持 `AA#BB` - 同时包含AA和BB
- 支持 `AA&CC` - 包含AA但不包含CC
- 自动转大写
- 自动去除空格
- 有保存按钮和提示

### NDui (当前):
- ✅ 支持 `,` 分隔
- ✅ 支持 `AA`
- ✅ 支持 `AA#BB`
- ✅ 支持 `AA&CC`
- ✅ 自动转大写
- ✅ 自动去除空格
- ❌ 没有保存按钮（实时保存）

**差异**: NDui 是实时保存，Pig 需要点保存按钮

---

## 3. 提示音
### Pig:
- 有多种声音可选（下拉菜单）
- 有播放按钮可以试听
- 30秒冷却
- 战斗中不播放

### NDui (当前):
- ❌ 只有一种声音（SOUNDKIT.TELL_MESSAGE）
- ❌ 没有播放按钮
- ✅ 30秒冷却
- ✅ 战斗中不播放

**差异**: Pig 有多种声音选择和试听功能

---

## 4. 继承过滤设置
### Pig:
- 可以继承黑名单过滤
- 包括：黑名单玩家、关键词过滤、重复消息过滤

### NDui (当前):
- ⚠️ 有选项但未实现具体功能

**差异**: Pig 有完整的黑名单过滤系统

---

## 5. 输出方式
### Pig:
- 系统聊天窗口：可选1-5号窗口
- 独立聊天窗口：完整的聊天框实现
  - 可调整高度
  - 有滚动条
  - 有滚动到底部按钮
  - 支持鼠标滚轮
  - 可点击链接
  - 战斗中可隐藏

### NDui (当前):
- ✅ 系统聊天窗口：可选1-5号窗口
- ✅ 独立聊天窗口：基本实现
  - ❌ 不可调整高度（固定180）
  - ✅ 有滚动条
  - ✅ 有滚动到底部按钮
  - ✅ 支持鼠标滚轮
  - ✅ 可点击链接
  - ✅ 战斗中可隐藏

**差异**: Pig 的独立窗口可调整高度

---

## 6. 消息显示格式
### Pig:
- 时间戳：`|cff828282HH:MM|r`
- 系统模式：`[|cff00FF00关注|r]`
- 玩家名：职业颜色 + 可点击链接
- 种族图标（可选）
- 消息内容：保留原始格式、表情、链接
- 关键词高亮：`|cff00FF00关键词|r`

### NDui (当前):
- ✅ 时间戳：`|cff808080HH:MM|r`
- ❌ 系统模式：没有 `[关注]` 标记
- ✅ 玩家名：职业颜色 + 可点击链接
- ❌ 没有种族图标
- ✅ 消息内容：保留原始格式
- ❌ 关键词没有高亮

**差异**: Pig 有更丰富的显示格式和关键词高亮

---

## 7. 过滤功能
### Pig:
- 过滤好友消息（不过滤）
- 过滤自己的消息
- 过滤特定插件消息（MeetingHorn等）
- 过滤重复消息（60秒内）
- 黑名单玩家过滤
- 黑名单关键词过滤

### NDui (当前):
- ❌ 未实现任何过滤

**差异**: Pig 有完整的过滤系统

---

## 8. 独立窗口特性
### Pig:
- 位置：ChatFrame1 上方
- 宽度：跟随 ChatFrame1
- 高度：可调整（滑块）
- 背景颜色：可自定义（颜色选择器）
- 字体大小：跟随聊天框设置
- 最大行数：100行
- 淡入淡出：关闭

### NDui (当前):
- ✅ 位置：ChatFrame1 上方
- ✅ 宽度：跟随 ChatFrame1
- ❌ 高度：固定180（不可调整）
- ❌ 背景颜色：固定（不可调整）
- ✅ 字体大小：跟随聊天框
- ✅ 最大行数：100行
- ✅ 淡入淡出：关闭

**差异**: Pig 可自定义高度和背景颜色

---

## 9. 窗口闪动
### Pig:
- 系统模式：提取成功时窗口标签闪动
- 仅当窗口不是当前选中时闪动

### NDui (当前):
- ✅ 系统模式：提取成功时窗口标签闪动
- ✅ 仅当窗口不是当前选中时闪动

**差异**: 无

---

## 10. 配置保存
### Pig:
- 保存到 PIGA["Chat"]["Tiqu"]
- 包括所有设置项
- 跨角色共享（可选）

### NDui (当前):
- ✅ 保存到 NDuiADB["KeywordMonitor"]
- ✅ 包括所有设置项
- ❌ 不支持跨角色共享

**差异**: Pig 支持跨角色共享配置

---

## 总结：需要补充的功能

### 高优先级（影响核心功能）:
1. ❌ **关键词高亮** - 在消息中用绿色高亮匹配的关键词
2. ❌ **过滤好友/自己消息** - 不提取好友和自己的消息
3. ❌ **过滤重复消息** - 60秒内相同消息只提取一次
4. ❌ **系统模式的 [关注] 标记** - 更明显的标识

### 中优先级（增强用户体验）:
5. ❌ **多种提示音选择** - 提供多种声音选项
6. ❌ **播放按钮** - 可以试听提示音
7. ❌ **高度调整滑块** - 独立窗口可调整高度
8. ❌ **背景颜色选择器** - 可自定义背景颜色

### 低优先级（可选功能）:
9. ❌ **种族图标** - 显示玩家种族图标
10. ❌ **黑名单系统** - 完整的过滤黑名单
11. ❌ **跨角色共享** - 配置跨角色共享

---

## 建议实现顺序:
1. 关键词高亮（最重要）
2. 过滤好友/自己/重复消息
3. 系统模式 [关注] 标记
4. 多种提示音 + 播放按钮
5. 高度调整滑块
6. 其他可选功能
